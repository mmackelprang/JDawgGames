var A=Object.defineProperty;var k=(l,n,t)=>n in l?A(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t;var c=(l,n,t)=>k(l,typeof n!="symbol"?n+"":n,t);import{P as E}from"./phaser-0RJB29YE.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function e(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const h=800,T=600,R=240,d=8,B=100,O=5,S=550,U=300,x=10,u=60,I=20,b=R/2,D=600,N=120,G=5,a={BALL:"ball",PADDLE:"platform",TITLE:"title",ICON:"icon",BLOCK_SINGLE:"5",BLOCK_DOUBLE_1:"8",BLOCK_DOUBLE_2:"9",BLOCK_HIDDEN:"transparent",BLOCK_HIDDEN_REVEALED:"3",BLOCK_MULTIBALL:"multiball_block",BLOCK_MULTIPLIER:"multiplier_block",BLOCK_MULTIPLIER_3:"multiplier_3_block",BLOCK_MULTIPLIER_4:"multiplier_4_block",BLOCK_MULTIPLIER_5:"multiplier_5_block",DROP_MULTIBALL:"dropped_multiball",DROP_MULTIPLIER:"dropped_multiplier",DROP_MULTIPLIER_3:"dropped_multiplier_3",DROP_MULTIPLIER_4:"dropped_multiplier_4",DROP_MULTIPLIER_5:"dropped_multiplier_5",GAUGE_EMPTY_2:"gauge_empty_2",GAUGE_EMPTY_3:"gauge_empty_3",GAUGE_EMPTY_4:"gauge_empty_4",GAUGE_EMPTY_5:"gauge_empty_5",GAUGE_FULL_2:"gauge_full_2",GAUGE_FULL_3:"gauge_full_3",GAUGE_FULL_4:"gauge_full_4",GAUGE_FULL_5:"gauge_full_5",SFX_BREAK:"sfx_break",SFX_BOUNCE:"sfx_bounce",SFX_POWERUP:"sfx_powerup",SFX_START:"sfx_start",SFX_WIN:"sfx_win"};class M extends E.Scene{constructor(){super({key:"BootScene"})}preload(){const n=this.add.graphics(),t=this.add.graphics();t.fillStyle(2236962,.8),t.fillRect(h/2-160,T/2-25,320,50);const e=this.add.text(h/2,T/2-50,"Loading...",{fontSize:"20px",color:"#ffffff"});e.setOrigin(.5,.5),this.load.on("progress",o=>{n.clear(),n.fillStyle(16777215,1),n.fillRect(h/2-150,T/2-15,300*o,30)}),this.load.on("complete",()=>{n.destroy(),t.destroy(),e.destroy()}),this.load.image(a.BALL,"images/ball.png"),this.load.image(a.PADDLE,"images/platform.png"),this.load.image(a.TITLE,"images/title.png"),this.load.image(a.ICON,"images/icon.png"),this.load.image(a.BLOCK_SINGLE,"images/5.png"),this.load.image(a.BLOCK_DOUBLE_1,"images/8.png"),this.load.image(a.BLOCK_DOUBLE_2,"images/9.png"),this.load.image(a.BLOCK_HIDDEN,"images/transparent.png"),this.load.image(a.BLOCK_HIDDEN_REVEALED,"images/3.png"),this.load.image("1","images/1.png"),this.load.image("2","images/2.png"),this.load.image("4","images/4.png"),this.load.image("6","images/6.png"),this.load.image("7","images/7.png"),this.load.image("10","images/10.png"),this.load.image(a.BLOCK_MULTIBALL,"images/multiball_block.png"),this.load.image(a.BLOCK_MULTIPLIER,"images/multiplier_block.png"),this.load.image(a.BLOCK_MULTIPLIER_3,"images/multiplier_3_block.png"),this.load.image(a.BLOCK_MULTIPLIER_4,"images/multiplier_4_block.png"),this.load.image(a.BLOCK_MULTIPLIER_5,"images/multiplier_5_block.png"),this.load.image(a.DROP_MULTIBALL,"images/dropped_multiball.png"),this.load.image(a.DROP_MULTIPLIER,"images/dropped_multiplier.png"),this.load.image(a.DROP_MULTIPLIER_3,"images/dropped_multiplier_3.png"),this.load.image(a.DROP_MULTIPLIER_4,"images/dropped_multiplier_4.png"),this.load.image(a.DROP_MULTIPLIER_5,"images/dropped_multiplier_5.png"),this.load.image(a.GAUGE_EMPTY_2,"images/gauge_empty_2.png"),this.load.image(a.GAUGE_EMPTY_3,"images/gauge_empty_3.png"),this.load.image(a.GAUGE_EMPTY_4,"images/gauge_empty_4.png"),this.load.image(a.GAUGE_EMPTY_5,"images/gauge_empty_5.png"),this.load.image(a.GAUGE_FULL_2,"images/gauge_full_2.png"),this.load.image(a.GAUGE_FULL_3,"images/gauge_full_3.png"),this.load.image(a.GAUGE_FULL_4,"images/gauge_full_4.png"),this.load.image(a.GAUGE_FULL_5,"images/gauge_full_5.png"),this.load.audio(a.SFX_BREAK,"sounds/hurt_c_08-102842.wav"),this.load.audio(a.SFX_BOUNCE,"sounds/stop-13692.wav"),this.load.audio(a.SFX_POWERUP,"sounds/video-game-powerup-38065.wav"),this.load.audio(a.SFX_START,"sounds/message-incoming-132126.wav"),this.load.audio(a.SFX_WIN,"sounds/winsquare-6993.wav")}create(){this.scene.start("TitleScene")}}var g=(l=>(l.SINGLE_HIT="SINGLE_HIT",l.DOUBLE_HIT="DOUBLE_HIT",l.HIDDEN="HIDDEN",l))(g||{}),f=(l=>(l.MULTI_BALL="MULTI_BALL",l.SCORE_MULTIPLY="SCORE_MULTIPLY",l.NO_POWERUP="NO_POWERUP",l))(f||{}),_=(l=>(l.TITLE="TITLE",l.PLAYING="PLAYING",l.GAME_OVER="GAME_OVER",l.GAME_WON="GAME_WON",l.ENTERING_INITIALS="ENTERING_INITIALS",l.SHOWING_HIGH_SCORES="SHOWING_HIGH_SCORES",l))(_||{});class H{constructor(){c(this,"balls",[]);c(this,"blocks",[]);c(this,"powerUpDrops",[]);c(this,"currentLevel",1);c(this,"remainingBlocks",0);c(this,"blocksInLevel",0);c(this,"score",0);c(this,"phase",_.TITLE);c(this,"gameWon",!1);c(this,"paddleX",400);c(this,"ballIsHeld",!0);c(this,"multiplierTimer",0);c(this,"extraBallTimer",0);c(this,"exitTimer",0);c(this,"scoreMultiplier",1);c(this,"highScores",[]);c(this,"initialsEntry",{currentInitials:["-","-","-"],currentPosition:0});c(this,"initialsEntered",!1);c(this,"pendingExtraBalls",0);this.loadHighScores()}reset(){this.balls=[],this.blocks=[],this.powerUpDrops=[],this.currentLevel=1,this.remainingBlocks=0,this.blocksInLevel=0,this.score=0,this.phase=_.PLAYING,this.gameWon=!1,this.paddleX=400,this.ballIsHeld=!0,this.multiplierTimer=0,this.extraBallTimer=0,this.scoreMultiplier=1,this.initialsEntry={currentInitials:["-","-","-"],currentPosition:0},this.initialsEntered=!1,this.pendingExtraBalls=0}resetForNewLevel(){this.balls=[],this.powerUpDrops=[],this.ballIsHeld=!0,this.pendingExtraBalls=0}incrementScore(){this.score+=this.scoreMultiplier}increaseMultiplier(){this.scoreMultiplier<G&&this.scoreMultiplier++,this.multiplierTimer=10}updateMultiplierTimer(n){this.multiplierTimer>0&&(this.multiplierTimer-=n,this.multiplierTimer<=0&&(this.multiplierTimer=0,this.scoreMultiplier=1))}updateExtraBallTimer(n){this.extraBallTimer>0&&(this.extraBallTimer-=n,this.extraBallTimer<=0&&(this.extraBallTimer=0,this.pendingExtraBalls++))}scheduleExtraBall(){this.extraBallTimer=5}isHighScore(){return this.highScores.length<10?!0:this.score>this.highScores[this.highScores.length-1].score}addHighScore(n){const t={initials:n,score:this.score};this.highScores.push(t),this.highScores.sort((e,o)=>o.score-e.score),this.highScores=this.highScores.slice(0,10),this.saveHighScores()}loadHighScores(){try{const n=localStorage.getItem("dxball_highscores");n?this.highScores=JSON.parse(n):this.initializeDefaultHighScores()}catch{this.initializeDefaultHighScores()}}initializeDefaultHighScores(){this.highScores=[];for(let n=0;n<10;n++)this.highScores.push({initials:"---",score:0})}saveHighScores(){try{localStorage.setItem("dxball_highscores",JSON.stringify(this.highScores))}catch{console.warn("Could not save high scores to localStorage")}}cycleInitialUp(){const n=this.initialsEntry.currentPosition,t=this.initialsEntry.currentInitials[n];t==="-"?this.initialsEntry.currentInitials[n]="A":t==="Z"?this.initialsEntry.currentInitials[n]="-":this.initialsEntry.currentInitials[n]=String.fromCharCode(t.charCodeAt(0)+1)}cycleInitialDown(){const n=this.initialsEntry.currentPosition,t=this.initialsEntry.currentInitials[n];t==="-"?this.initialsEntry.currentInitials[n]="Z":t==="A"?this.initialsEntry.currentInitials[n]="-":this.initialsEntry.currentInitials[n]=String.fromCharCode(t.charCodeAt(0)-1)}setInitialChar(n){const t=this.initialsEntry.currentPosition,e=n.toUpperCase();e>="A"&&e<="Z"&&(this.initialsEntry.currentInitials[t]=e,t<2&&(this.initialsEntry.currentPosition=t+1))}movePositionLeft(){this.initialsEntry.currentPosition>0&&this.initialsEntry.currentPosition--}movePositionRight(){this.initialsEntry.currentPosition<2&&this.initialsEntry.currentPosition++}getInitials(){return this.initialsEntry.currentInitials.join("")}}const i=new H;class C{constructor(){c(this,"touchState",{left:!1,right:!1,launch:!1});c(this,"leftBtn",null);c(this,"rightBtn",null);c(this,"launchBtn",null);c(this,"touchControlsDiv",null);this.initialize()}initialize(){this.leftBtn=document.getElementById("leftBtn"),this.rightBtn=document.getElementById("rightBtn"),this.launchBtn=document.getElementById("launchBtn"),this.touchControlsDiv=document.getElementById("touchControls"),("ontouchstart"in window||navigator.maxTouchPoints>0)&&this.touchControlsDiv&&(this.touchControlsDiv.style.display="block",this.setupTouchListeners())}setupTouchListeners(){this.leftBtn&&(this.leftBtn.addEventListener("touchstart",n=>{n.preventDefault(),this.touchState.left=!0}),this.leftBtn.addEventListener("touchend",n=>{n.preventDefault(),this.touchState.left=!1}),this.leftBtn.addEventListener("touchcancel",n=>{n.preventDefault(),this.touchState.left=!1})),this.rightBtn&&(this.rightBtn.addEventListener("touchstart",n=>{n.preventDefault(),this.touchState.right=!0}),this.rightBtn.addEventListener("touchend",n=>{n.preventDefault(),this.touchState.right=!1}),this.rightBtn.addEventListener("touchcancel",n=>{n.preventDefault(),this.touchState.right=!1})),this.launchBtn&&(this.launchBtn.addEventListener("touchstart",n=>{n.preventDefault(),this.touchState.launch=!0}),this.launchBtn.addEventListener("touchend",n=>{n.preventDefault(),this.touchState.launch=!1}),this.launchBtn.addEventListener("touchcancel",n=>{n.preventDefault(),this.touchState.launch=!1}))}getState(){return this.touchState}isLeftPressed(){return this.touchState.left}isRightPressed(){return this.touchState.right}isLaunchPressed(){return this.touchState.launch}wasLaunchJustPressed(){return this.touchState.launch}resetLaunch(){this.touchState.launch=!1}}class K extends E.Scene{constructor(){super({key:"TitleScene"});c(this,"exitTimer",D);c(this,"blinkTimer",0);c(this,"startText");c(this,"showText",!0);c(this,"touchControls");c(this,"previousLaunchPressed",!1)}create(){var e,o;i.phase=_.TITLE,this.exitTimer=D,this.touchControls=new C,this.add.image(h/2,T/2-50,a.TITLE).setOrigin(.5,.5),this.startText=this.add.text(h/2,T-100,"Press SPACE to Start",{fontSize:"24px",color:"#ffffff",fontFamily:"monospace"}),this.startText.setOrigin(.5,.5),this.add.text(h/2,T-50,"Mouse/Arrow Keys/Touch to move | Click/SPACE/Touch to launch",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(h/2,T-30,"ESC to quit game",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),(e=this.input.keyboard)==null||e.on("keydown-SPACE",this.startGame,this),(o=this.input.keyboard)==null||o.on("keydown-ENTER",this.startGame,this),this.input.on("pointerdown",()=>this.startGame())}update(t,e){const o=e/1e3;this.exitTimer-=o,this.exitTimer<=0&&(this.exitTimer=D);const s=this.touchControls.isLaunchPressed();s&&!this.previousLaunchPressed&&this.startGame(),this.previousLaunchPressed=s,this.blinkTimer+=o,this.blinkTimer>=.5&&(this.blinkTimer=0,this.showText=!this.showText,this.startText.setVisible(this.showText))}startGame(){this.sound.play(a.SFX_START),i.reset(),this.scene.start("GameScene")}}function F(l,n){switch(i.remainingBlocks=0,i.blocksInLevel=0,n){case 1:W(l);break;case 2:X(l);break;case 3:Y(l);break;case 4:z(l);break}$(n)}function W(l){for(let t=0;t<8;t++){const e=160+t*u+u/2;l.createBlock(e,100,g.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<6;t++){const e=220+t*u+u/2;l.createBlock(e,100+I,g.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<6;t++){const e=220+t*u+u/2;l.createBlock(e,100+I*2,g.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<4;t++){const e=280+t*u+u/2;l.createBlock(e,100+I*3,g.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<4;t++){const e=280+t*u+u/2;l.createBlock(e,100+I*4,g.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<2;t++){const e=340+t*u+u/2;l.createBlock(e,100+I*5,g.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<2;t++){const e=340+t*u+u/2;l.createBlock(e,100+I*6,g.SINGLE_HIT,f.NO_POWERUP)}}function X(l){const t=[[1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0]];let e=0;for(let o=0;o<t.length;o++)for(let s=0;s<t[o].length;s++)if(t[o][s]===1){const r=100+s*u+u/2,p=80+o*I+I/2,m=e%3===0?g.DOUBLE_HIT:g.SINGLE_HIT;l.createBlock(r,p,m,f.NO_POWERUP),e++}}function Y(l){for(let t=0;t<4;t++)for(let e=0;e<8;e++){const o=160+e*u+u/2,s=80+t*I+I/2;l.createBlock(o,s,g.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<2;t++)for(let e=0;e<6;e++){const o=220+e*u+u/2,s=80+(t+5)*I+I/2;l.createBlock(o,s,g.HIDDEN,f.NO_POWERUP)}}function z(l){for(let o=0;o<10;o++)for(let s=0;s<12;s++){const r=40+s*u+u/2,p=60+o*I+I/2,m=Math.random();let L;m<.6?L=g.SINGLE_HIT:m<.85?L=g.DOUBLE_HIT:L=g.HIDDEN,l.createBlock(r,p,L,f.NO_POWERUP)}}function $(l){const n=i.blocks,t=n.length;let e,o;switch(l){case 1:e=4,o=2;break;case 2:e=6,o=3;break;case 3:e=8,o=4;break;case 4:e=15,o=10;break;default:e=4,o=2}const s=[];for(let r=0;r<t;r++)s.push(r);V(s);for(let r=0;r<Math.min(e,s.length);r++)n[s[r]].powerUpKind=f.MULTI_BALL;for(let r=e;r<Math.min(e+o,s.length);r++)n[s[r]].powerUpKind=f.SCORE_MULTIPLY}function V(l){for(let n=l.length-1;n>0;n--){const t=Math.floor(Math.random()*(n+1));[l[n],l[t]]=[l[t],l[n]]}}class J extends E.Scene{constructor(){super({key:"GameScene"});c(this,"paddle");c(this,"cursors");c(this,"launchKey");c(this,"spaceKey");c(this,"escapeKey");c(this,"touchControls");c(this,"previousLaunchPressed",!1);c(this,"scoreText");c(this,"levelText");c(this,"multiplierText");c(this,"gaugeSprites",[])}create(){i.phase=_.PLAYING,this.touchControls=new C,this.createBorders(),this.paddle=this.add.sprite(h/2,S,a.PADDLE),this.paddle.setOrigin(.5,.5),i.paddleX=h/2,this.cursors=this.input.keyboard.createCursorKeys(),this.launchKey=this.input.keyboard.addKey(E.Input.Keyboard.KeyCodes.Z),this.spaceKey=this.input.keyboard.addKey(E.Input.Keyboard.KeyCodes.SPACE),this.escapeKey=this.input.keyboard.addKey(E.Input.Keyboard.KeyCodes.ESC),this.input.on("pointermove",t=>{this.handleMouseMove(t)}),this.input.on("pointerdown",()=>{this.launchBall()}),this.createUI(),this.startLevel(i.currentLevel)}createBorders(){const t=this.add.graphics(),e=4474111,o=4;t.lineStyle(o,e,1),t.lineBetween(o/2,0,o/2,T),t.lineBetween(h-o/2,0,h-o/2,T),t.lineBetween(0,o/2,h,o/2)}createUI(){this.scoreText=this.add.text(10,10,"Score: 0",{fontSize:"18px",color:"#ffffff",fontFamily:"monospace"}),this.levelText=this.add.text(h-10,10,"Level: 1",{fontSize:"18px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(1,0),this.multiplierText=this.add.text(h/2,10,"",{fontSize:"18px",color:"#ffff00",fontFamily:"monospace"}).setOrigin(.5,0)}startLevel(t){this.clearLevel(),i.resetForNewLevel(),i.currentLevel=t,F(this,t),this.createBall(i.paddleX,S-d-O/2,!0),this.levelText.setText(`Level: ${t}`)}clearLevel(){var t,e,o,s;for(const r of i.balls)(t=r.sprite)==null||t.destroy();i.balls=[];for(const r of i.blocks)(e=r.sprite)==null||e.destroy(),(o=r.powerUpSprite)==null||o.destroy();i.blocks=[];for(const r of i.powerUpDrops)(s=r.sprite)==null||s.destroy();i.powerUpDrops=[];for(const r of this.gaugeSprites)r.destroy();this.gaugeSprites=[]}createBall(t,e,o=!1){const s=this.add.sprite(t,e,a.BALL);s.setOrigin(.5,.5);const r={x:t,y:e,up:!0,right:Math.random()>.5,sprite:s};return i.balls.push(r),i.ballIsHeld=o,r}createBlock(t,e,o,s){let r,p;switch(o){case g.SINGLE_HIT:r=a.BLOCK_SINGLE,p=1;break;case g.DOUBLE_HIT:r=a.BLOCK_DOUBLE_1,p=2;break;case g.HIDDEN:r=a.BLOCK_HIDDEN,p=2;break}const m=this.add.sprite(t,e,r);m.setOrigin(.5,.5);let L,y="";s!==f.NO_POWERUP&&(s===f.MULTI_BALL?y=a.BLOCK_MULTIBALL:y=a.BLOCK_MULTIPLIER,o!==g.HIDDEN&&(L=this.add.sprite(t,e,y),L.setOrigin(.5,.5)));const P={x:t,y:e,kind:o,powerUpKind:s,hitPoints:p,blockBitmap:r,powerUpBitmap:y,sprite:m,powerUpSprite:L,active:!0};return i.blocks.push(P),i.remainingBlocks++,i.blocksInLevel++,P}update(t,e){const o=e/1e3;for(i.updateMultiplierTimer(o),i.updateExtraBallTimer(o);i.pendingExtraBalls>0;){i.pendingExtraBalls--,this.createBall(i.paddleX,S-d-O/2,!1);const s=i.balls[i.balls.length-1];s.up=!0,s.right=Math.random()>.5}this.handleInput(o),this.updateBalls(o),this.updatePowerUpDrops(o),this.updateUI(),i.remainingBlocks<=0&&this.onLevelComplete()}handleMouseMove(t){const e=B/2;i.paddleX=E.Math.Clamp(t.x,x+e,h-x-e)}launchBall(){i.ballIsHeld&&(i.ballIsHeld=!1,this.sound.play(a.SFX_BOUNCE,{volume:.25}))}handleInput(t){if(E.Input.Keyboard.JustDown(this.escapeKey)){this.onGameOver(!1);return}this.cursors.left.isDown&&(i.paddleX-=U*t),this.cursors.right.isDown&&(i.paddleX+=U*t),this.touchControls.isLeftPressed()&&(i.paddleX-=U*t),this.touchControls.isRightPressed()&&(i.paddleX+=U*t);const e=B/2;i.paddleX=E.Math.Clamp(i.paddleX,x+e,h-x-e),this.paddle.x=i.paddleX,(E.Input.Keyboard.JustDown(this.launchKey)||E.Input.Keyboard.JustDown(this.spaceKey))&&i.ballIsHeld&&this.launchBall();const o=this.touchControls.isLaunchPressed();if(o&&!this.previousLaunchPressed&&i.ballIsHeld&&this.launchBall(),this.previousLaunchPressed=o,i.ballIsHeld&&i.balls.length>0){const s=i.balls[0];s.x=i.paddleX,s.y=S-d-O/2,s.sprite.x=s.x,s.sprite.y=s.y}}updateBalls(t){var o;const e=[];for(let s=0;s<i.balls.length;s++){const r=i.balls[s];if(i.ballIsHeld&&s===0)continue;const p=R*t;if(r.x+=r.right?p:-p,r.y+=r.up?-p:p,r.x<=d&&(r.x=d,r.right=!0,this.sound.play(a.SFX_BOUNCE,{volume:.25})),r.x>=h-d&&(r.x=h-d,r.right=!1,this.sound.play(a.SFX_BOUNCE,{volume:.25})),r.y<=d&&(r.y=d,r.up=!1,this.sound.play(a.SFX_BOUNCE,{volume:.25})),r.y>=T+d){e.push(s);continue}this.checkPaddleCollision(r)&&(r.up=!0,r.y=S-O/2-d,this.sound.play(a.SFX_BOUNCE,{volume:.25})),this.checkBlockCollisions(r),r.sprite.x=r.x,r.sprite.y=r.y}for(let s=e.length-1;s>=0;s--){const r=e[s];(o=i.balls[r].sprite)==null||o.destroy(),i.balls.splice(r,1)}i.balls.length===0&&!i.ballIsHeld&&this.onGameOver(!1)}checkPaddleCollision(t){const e=i.paddleX-B/2,o=i.paddleX+B/2,s=S-O/2,r=S+O/2;return t.x+d>e&&t.x-d<o&&t.y+d>s&&t.y-d<r&&!t.up}checkBlockCollisions(t){for(const e of i.blocks){if(!e.active)continue;const o=e.x-u/2,s=e.x+u/2,r=e.y-I/2,p=e.y+I/2;if(t.x+d>o&&t.x-d<s&&t.y+d>r&&t.y-d<p){const m=t.x+d-o,L=s-(t.x-d),y=t.y+d-r,P=p-(t.y-d),v=Math.min(m,L),w=Math.min(y,P);v<w?t.right=m>L:t.up=y>P,this.hitBlock(e);break}}}hitBlock(t){var e,o,s,r;if(t.hitPoints--,i.incrementScore(),t.hitPoints<=0)t.active=!1,(e=t.sprite)==null||e.destroy(),(o=t.powerUpSprite)==null||o.destroy(),i.remainingBlocks--,this.sound.play(a.SFX_BREAK),t.powerUpKind!==f.NO_POWERUP&&this.spawnPowerUpDrop(t.x,t.y,t.powerUpKind);else{if(t.kind===g.DOUBLE_HIT)(s=t.sprite)==null||s.setTexture(a.BLOCK_DOUBLE_2);else if(t.kind===g.HIDDEN&&((r=t.sprite)==null||r.setTexture(a.BLOCK_HIDDEN_REVEALED),t.powerUpKind!==f.NO_POWERUP&&!t.powerUpSprite)){const p=t.powerUpKind===f.MULTI_BALL?a.BLOCK_MULTIBALL:a.BLOCK_MULTIPLIER;t.powerUpSprite=this.add.sprite(t.x,t.y,p),t.powerUpSprite.setOrigin(.5,.5)}this.sound.play(a.SFX_BOUNCE,{volume:.25})}}spawnPowerUpDrop(t,e,o){let s;if(o===f.MULTI_BALL)s=a.DROP_MULTIBALL;else{const m=Math.min(i.scoreMultiplier+1,5);m<=2?s=a.DROP_MULTIPLIER:m===3?s=a.DROP_MULTIPLIER_3:m===4?s=a.DROP_MULTIPLIER_4:s=a.DROP_MULTIPLIER_5}const r=this.add.sprite(t,e,s);r.setOrigin(.5,.5);const p={x:t,y:e,kind:o,sprite:r};i.powerUpDrops.push(p)}updatePowerUpDrops(t){var o;const e=[];for(let s=0;s<i.powerUpDrops.length;s++){const r=i.powerUpDrops[s];if(r.y+=b*t,r.sprite.y=r.y,r.y>T+20){e.push(s);continue}this.checkPowerUpCatch(r)&&(this.activatePowerUp(r.kind),e.push(s))}for(let s=e.length-1;s>=0;s--){const r=e[s];(o=i.powerUpDrops[r].sprite)==null||o.destroy(),i.powerUpDrops.splice(r,1)}}checkPowerUpCatch(t){const e=i.paddleX-B/2,o=i.paddleX+B/2,s=S-O/2;return t.x>e&&t.x<o&&t.y>s-10&&t.y<S+10}activatePowerUp(t){this.sound.play(a.SFX_POWERUP,{volume:.5}),t===f.MULTI_BALL?i.scheduleExtraBall():t===f.SCORE_MULTIPLY&&i.increaseMultiplier()}updateUI(){this.scoreText.setText(`Score: ${i.score}`),i.scoreMultiplier>1?(this.multiplierText.setText(`x${i.scoreMultiplier}`),this.multiplierText.setVisible(!0)):this.multiplierText.setVisible(!1)}onLevelComplete(){i.currentLevel>=4?this.onGameOver(!0):(i.currentLevel++,this.startLevel(i.currentLevel))}onGameOver(t){i.gameWon=t,t&&this.sound.play(a.SFX_WIN),this.clearLevel(),this.scene.start("GameOverScene")}}class Z extends E.Scene{constructor(){super({key:"GameOverScene"});c(this,"displayTimer",N);c(this,"initialsText");c(this,"cursorBlink",!0);c(this,"blinkTimer",0)}create(){var t;i.score>0&&i.isHighScore()?(i.phase=_.ENTERING_INITIALS,this.showInitialsEntry()):(i.phase=_.SHOWING_HIGH_SCORES,this.showHighScores()),(t=this.input.keyboard)==null||t.on("keydown-X",this.exitToTitle,this)}showInitialsEntry(){var e,o,s,r,p,m,L;const t=i.gameWon?"YOU WIN!":"GAME OVER";this.add.text(h/2,80,t,{fontSize:"48px",color:i.gameWon?"#00ff00":"#ff0000",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(h/2,150,`Final Score: ${i.score}`,{fontSize:"24px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(h/2,200,"NEW HIGH SCORE!",{fontSize:"28px",color:"#ffff00",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(h/2,260,"Enter Your Initials:",{fontSize:"20px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5),this.initialsText=this.add.text(h/2,320,"_ _ _",{fontSize:"48px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(h/2,400,"Type letters A-Z or use UP/DOWN to change",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(h/2,425,"LEFT/RIGHT: Move cursor | BACKSPACE: Delete",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(h/2,450,"ENTER: Submit",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),(e=this.input.keyboard)==null||e.on("keydown-UP",this.cycleUp,this),(o=this.input.keyboard)==null||o.on("keydown-DOWN",this.cycleDown,this),(s=this.input.keyboard)==null||s.on("keydown-LEFT",this.moveLeft,this),(r=this.input.keyboard)==null||r.on("keydown-RIGHT",this.moveRight,this),(p=this.input.keyboard)==null||p.on("keydown-ENTER",this.submitInitials,this),(m=this.input.keyboard)==null||m.on("keydown-BACKSPACE",this.handleBackspace,this),(L=this.input.keyboard)==null||L.on("keydown",this.handleKeyInput,this),this.updateInitialsDisplay()}showHighScores(){var e,o;if(this.displayTimer=N,this.add.text(h/2,60,"HIGH SCORES",{fontSize:"36px",color:"#ffff00",fontFamily:"monospace"}).setOrigin(.5,.5),i.score>0){const s=i.gameWon?"YOU WIN!":"GAME OVER";this.add.text(h/2,100,s,{fontSize:"24px",color:i.gameWon?"#00ff00":"#ff0000",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(h/2,130,`Your Score: ${i.score}`,{fontSize:"18px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5)}const t=i.score>0?180:120;for(let s=0;s<i.highScores.length;s++){const r=i.highScores[s],p=`${s+1}.`.padStart(3," "),m=r.initials.padEnd(3,"-"),L=r.score.toString().padStart(6," ");this.add.text(h/2,t+s*35,`${p} ${m} ${L}`,{fontSize:"22px",color:s<3?"#ffff00":"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5)}this.add.text(h/2,T-50,"Press X, SPACE, or ENTER to Continue",{fontSize:"18px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),(e=this.input.keyboard)==null||e.on("keydown-SPACE",this.exitToTitle,this),(o=this.input.keyboard)==null||o.on("keydown-ENTER",this.exitToTitle,this)}handleKeyInput(t){if(i.phase!==_.ENTERING_INITIALS)return;const e=t.key.toUpperCase();e.length===1&&e>="A"&&e<="Z"&&(i.setInitialChar(e),this.updateInitialsDisplay())}handleBackspace(){if(i.phase!==_.ENTERING_INITIALS)return;const t=i.initialsEntry.currentPosition;i.initialsEntry.currentInitials[t]="-",t>0&&(i.initialsEntry.currentPosition=t-1),this.updateInitialsDisplay()}cycleUp(){i.phase===_.ENTERING_INITIALS&&(i.cycleInitialUp(),this.updateInitialsDisplay())}cycleDown(){i.phase===_.ENTERING_INITIALS&&(i.cycleInitialDown(),this.updateInitialsDisplay())}moveLeft(){i.phase===_.ENTERING_INITIALS&&(i.movePositionLeft(),this.updateInitialsDisplay())}moveRight(){i.phase===_.ENTERING_INITIALS&&(i.movePositionRight(),this.updateInitialsDisplay())}updateInitialsDisplay(){const t=i.initialsEntry.currentInitials,e=i.initialsEntry.currentPosition;let o="";for(let s=0;s<3;s++)s===e&&this.cursorBlink?o+=`[${t[s]}]`:o+=` ${t[s]} `;this.initialsText.setText(o)}submitInitials(){if(i.phase!==_.ENTERING_INITIALS)return;const t=i.getInitials();i.addHighScore(t),i.initialsEntered=!0,i.phase=_.SHOWING_HIGH_SCORES,this.scene.restart()}exitToTitle(){this.scene.start("TitleScene")}update(t,e){const o=e/1e3;i.phase===_.ENTERING_INITIALS&&(this.blinkTimer+=o,this.blinkTimer>=.3&&(this.blinkTimer=0,this.cursorBlink=!this.cursorBlink,this.updateInitialsDisplay())),i.phase===_.SHOWING_HIGH_SCORES&&(this.displayTimer-=o,this.displayTimer<=0&&this.exitToTitle())}}const q={type:E.AUTO,width:h,height:T,parent:"game-container",backgroundColor:"#000000",scale:{mode:E.Scale.FIT,autoCenter:E.Scale.CENTER_BOTH},scene:[M,K,J,Z],physics:{default:"arcade",arcade:{debug:!1}},audio:{disableWebAudio:!1},render:{pixelArt:!0,antialias:!1}};new E.Game(q);
