var k=Object.defineProperty;var w=(n,a,t)=>a in n?k(n,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[a]=t;var c=(n,a,t)=>w(n,typeof a!="symbol"?a+"":a,t);import{P as I}from"./phaser-0RJB29YE.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&e(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const p=800,T=600,R=240,u=8,U=100,O=5,y=550,N=300,B=10,d=60,L=20,G=R/2,x=600,D=120,b=5,l={BALL:"ball",PADDLE:"platform",TITLE:"title",ICON:"icon",BLOCK_SINGLE:"5",BLOCK_DOUBLE_1:"8",BLOCK_DOUBLE_2:"9",BLOCK_HIDDEN:"transparent",BLOCK_HIDDEN_REVEALED:"3",BLOCK_MULTIBALL:"multiball_block",BLOCK_MULTIPLIER:"multiplier_block",BLOCK_MULTIPLIER_3:"multiplier_3_block",BLOCK_MULTIPLIER_4:"multiplier_4_block",BLOCK_MULTIPLIER_5:"multiplier_5_block",DROP_MULTIBALL:"dropped_multiball",DROP_MULTIPLIER:"dropped_multiplier",DROP_MULTIPLIER_3:"dropped_multiplier_3",DROP_MULTIPLIER_4:"dropped_multiplier_4",DROP_MULTIPLIER_5:"dropped_multiplier_5",GAUGE_EMPTY_2:"gauge_empty_2",GAUGE_EMPTY_3:"gauge_empty_3",GAUGE_EMPTY_4:"gauge_empty_4",GAUGE_EMPTY_5:"gauge_empty_5",GAUGE_FULL_2:"gauge_full_2",GAUGE_FULL_3:"gauge_full_3",GAUGE_FULL_4:"gauge_full_4",GAUGE_FULL_5:"gauge_full_5",SFX_BREAK:"sfx_break",SFX_BOUNCE:"sfx_bounce",SFX_POWERUP:"sfx_powerup",SFX_START:"sfx_start",SFX_WIN:"sfx_win"};class M extends I.Scene{constructor(){super({key:"BootScene"})}preload(){const a=this.add.graphics(),t=this.add.graphics();t.fillStyle(2236962,.8),t.fillRect(p/2-160,T/2-25,320,50);const e=this.add.text(p/2,T/2-50,"Loading...",{fontSize:"20px",color:"#ffffff"});e.setOrigin(.5,.5),this.load.on("progress",s=>{a.clear(),a.fillStyle(16777215,1),a.fillRect(p/2-150,T/2-15,300*s,30)}),this.load.on("complete",()=>{a.destroy(),t.destroy(),e.destroy()}),this.load.image(l.BALL,"images/ball.png"),this.load.image(l.PADDLE,"images/platform.png"),this.load.image(l.TITLE,"images/title.png"),this.load.image(l.ICON,"images/icon.png"),this.load.image(l.BLOCK_SINGLE,"images/5.png"),this.load.image(l.BLOCK_DOUBLE_1,"images/8.png"),this.load.image(l.BLOCK_DOUBLE_2,"images/9.png"),this.load.image(l.BLOCK_HIDDEN,"images/transparent.png"),this.load.image(l.BLOCK_HIDDEN_REVEALED,"images/3.png"),this.load.image("1","images/1.png"),this.load.image("2","images/2.png"),this.load.image("4","images/4.png"),this.load.image("6","images/6.png"),this.load.image("7","images/7.png"),this.load.image("10","images/10.png"),this.load.image(l.BLOCK_MULTIBALL,"images/multiball_block.png"),this.load.image(l.BLOCK_MULTIPLIER,"images/multiplier_block.png"),this.load.image(l.BLOCK_MULTIPLIER_3,"images/multiplier_3_block.png"),this.load.image(l.BLOCK_MULTIPLIER_4,"images/multiplier_4_block.png"),this.load.image(l.BLOCK_MULTIPLIER_5,"images/multiplier_5_block.png"),this.load.image(l.DROP_MULTIBALL,"images/dropped_multiball.png"),this.load.image(l.DROP_MULTIPLIER,"images/dropped_multiplier.png"),this.load.image(l.DROP_MULTIPLIER_3,"images/dropped_multiplier_3.png"),this.load.image(l.DROP_MULTIPLIER_4,"images/dropped_multiplier_4.png"),this.load.image(l.DROP_MULTIPLIER_5,"images/dropped_multiplier_5.png"),this.load.image(l.GAUGE_EMPTY_2,"images/gauge_empty_2.png"),this.load.image(l.GAUGE_EMPTY_3,"images/gauge_empty_3.png"),this.load.image(l.GAUGE_EMPTY_4,"images/gauge_empty_4.png"),this.load.image(l.GAUGE_EMPTY_5,"images/gauge_empty_5.png"),this.load.image(l.GAUGE_FULL_2,"images/gauge_full_2.png"),this.load.image(l.GAUGE_FULL_3,"images/gauge_full_3.png"),this.load.image(l.GAUGE_FULL_4,"images/gauge_full_4.png"),this.load.image(l.GAUGE_FULL_5,"images/gauge_full_5.png"),this.load.audio(l.SFX_BREAK,"sounds/hurt_c_08-102842.wav"),this.load.audio(l.SFX_BOUNCE,"sounds/stop-13692.wav"),this.load.audio(l.SFX_POWERUP,"sounds/video-game-powerup-38065.wav"),this.load.audio(l.SFX_START,"sounds/message-incoming-132126.wav"),this.load.audio(l.SFX_WIN,"sounds/winsquare-6993.wav")}create(){this.scene.start("TitleScene")}}var _=(n=>(n.SINGLE_HIT="SINGLE_HIT",n.DOUBLE_HIT="DOUBLE_HIT",n.HIDDEN="HIDDEN",n))(_||{}),f=(n=>(n.MULTI_BALL="MULTI_BALL",n.SCORE_MULTIPLY="SCORE_MULTIPLY",n.NO_POWERUP="NO_POWERUP",n))(f||{}),m=(n=>(n.TITLE="TITLE",n.PLAYING="PLAYING",n.GAME_OVER="GAME_OVER",n.GAME_WON="GAME_WON",n.ENTERING_INITIALS="ENTERING_INITIALS",n.SHOWING_HIGH_SCORES="SHOWING_HIGH_SCORES",n))(m||{});class H{constructor(){c(this,"balls",[]);c(this,"blocks",[]);c(this,"powerUpDrops",[]);c(this,"currentLevel",1);c(this,"remainingBlocks",0);c(this,"blocksInLevel",0);c(this,"score",0);c(this,"phase",m.TITLE);c(this,"gameWon",!1);c(this,"paddleX",400);c(this,"ballIsHeld",!0);c(this,"multiplierTimer",0);c(this,"extraBallTimer",0);c(this,"exitTimer",0);c(this,"scoreMultiplier",1);c(this,"highScores",[]);c(this,"initialsEntry",{currentInitials:["-","-","-"],currentPosition:0});c(this,"initialsEntered",!1);c(this,"pendingExtraBalls",0);this.loadHighScores()}reset(){this.balls=[],this.blocks=[],this.powerUpDrops=[],this.currentLevel=1,this.remainingBlocks=0,this.blocksInLevel=0,this.score=0,this.phase=m.PLAYING,this.gameWon=!1,this.paddleX=400,this.ballIsHeld=!0,this.multiplierTimer=0,this.extraBallTimer=0,this.scoreMultiplier=1,this.initialsEntry={currentInitials:["-","-","-"],currentPosition:0},this.initialsEntered=!1,this.pendingExtraBalls=0}resetForNewLevel(){this.balls=[],this.powerUpDrops=[],this.ballIsHeld=!0,this.pendingExtraBalls=0}incrementScore(){this.score+=this.scoreMultiplier}increaseMultiplier(){this.scoreMultiplier<b&&this.scoreMultiplier++,this.multiplierTimer=10}updateMultiplierTimer(a){this.multiplierTimer>0&&(this.multiplierTimer-=a,this.multiplierTimer<=0&&(this.multiplierTimer=0,this.scoreMultiplier=1))}updateExtraBallTimer(a){this.extraBallTimer>0&&(this.extraBallTimer-=a,this.extraBallTimer<=0&&(this.extraBallTimer=0,this.pendingExtraBalls++))}scheduleExtraBall(){this.extraBallTimer=5}isHighScore(){return this.highScores.length<10?!0:this.score>this.highScores[this.highScores.length-1].score}addHighScore(a){const t={initials:a,score:this.score};this.highScores.push(t),this.highScores.sort((e,s)=>s.score-e.score),this.highScores=this.highScores.slice(0,10),this.saveHighScores()}loadHighScores(){try{const a=localStorage.getItem("dxball_highscores");a?this.highScores=JSON.parse(a):this.initializeDefaultHighScores()}catch{this.initializeDefaultHighScores()}}initializeDefaultHighScores(){this.highScores=[];for(let a=0;a<10;a++)this.highScores.push({initials:"---",score:0})}saveHighScores(){try{localStorage.setItem("dxball_highscores",JSON.stringify(this.highScores))}catch{console.warn("Could not save high scores to localStorage")}}cycleInitialUp(){const a=this.initialsEntry.currentPosition,t=this.initialsEntry.currentInitials[a];t==="-"?this.initialsEntry.currentInitials[a]="A":t==="Z"?this.initialsEntry.currentInitials[a]="-":this.initialsEntry.currentInitials[a]=String.fromCharCode(t.charCodeAt(0)+1)}cycleInitialDown(){const a=this.initialsEntry.currentPosition,t=this.initialsEntry.currentInitials[a];t==="-"?this.initialsEntry.currentInitials[a]="Z":t==="A"?this.initialsEntry.currentInitials[a]="-":this.initialsEntry.currentInitials[a]=String.fromCharCode(t.charCodeAt(0)-1)}setInitialChar(a){const t=this.initialsEntry.currentPosition,e=a.toUpperCase();e>="A"&&e<="Z"&&(this.initialsEntry.currentInitials[t]=e,t<2&&(this.initialsEntry.currentPosition=t+1))}movePositionLeft(){this.initialsEntry.currentPosition>0&&this.initialsEntry.currentPosition--}movePositionRight(){this.initialsEntry.currentPosition<2&&this.initialsEntry.currentPosition++}getInitials(){return this.initialsEntry.currentInitials.join("")}}const i=new H;class v extends I.Scene{constructor(){super({key:"TitleScene"});c(this,"exitTimer",x);c(this,"blinkTimer",0);c(this,"startText");c(this,"showText",!0)}create(){var e,s;i.phase=m.TITLE,this.exitTimer=x,this.add.image(p/2,T/2-50,l.TITLE).setOrigin(.5,.5),this.startText=this.add.text(p/2,T-100,"Press SPACE to Start",{fontSize:"24px",color:"#ffffff",fontFamily:"monospace"}),this.startText.setOrigin(.5,.5),this.add.text(p/2,T-50,"Mouse or Arrow Keys to move | Click or SPACE to launch",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(p/2,T-30,"ESC to quit game",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),(e=this.input.keyboard)==null||e.on("keydown-SPACE",this.startGame,this),(s=this.input.keyboard)==null||s.on("keydown-ENTER",this.startGame,this),this.input.on("pointerdown",()=>this.startGame())}update(t,e){const s=e/1e3;this.exitTimer-=s,this.exitTimer<=0&&(this.exitTimer=x),this.blinkTimer+=s,this.blinkTimer>=.5&&(this.blinkTimer=0,this.showText=!this.showText,this.startText.setVisible(this.showText))}startGame(){this.sound.play(l.SFX_START),i.reset(),this.scene.start("GameScene")}}function K(n,a){switch(i.remainingBlocks=0,i.blocksInLevel=0,a){case 1:F(n);break;case 2:W(n);break;case 3:X(n);break;case 4:Y(n);break}z(a)}function F(n){for(let t=0;t<8;t++){const e=160+t*d+d/2;n.createBlock(e,100,_.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<6;t++){const e=220+t*d+d/2;n.createBlock(e,100+L,_.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<6;t++){const e=220+t*d+d/2;n.createBlock(e,100+L*2,_.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<4;t++){const e=280+t*d+d/2;n.createBlock(e,100+L*3,_.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<4;t++){const e=280+t*d+d/2;n.createBlock(e,100+L*4,_.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<2;t++){const e=340+t*d+d/2;n.createBlock(e,100+L*5,_.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<2;t++){const e=340+t*d+d/2;n.createBlock(e,100+L*6,_.SINGLE_HIT,f.NO_POWERUP)}}function W(n){const t=[[1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0],[0,1,0,1,0,1,0,1,0,1],[1,0,1,0,1,0,1,0,1,0]];let e=0;for(let s=0;s<t.length;s++)for(let o=0;o<t[s].length;o++)if(t[s][o]===1){const r=100+o*d+d/2,h=80+s*L+L/2,g=e%3===0?_.DOUBLE_HIT:_.SINGLE_HIT;n.createBlock(r,h,g,f.NO_POWERUP),e++}}function X(n){for(let t=0;t<4;t++)for(let e=0;e<8;e++){const s=160+e*d+d/2,o=80+t*L+L/2;n.createBlock(s,o,_.SINGLE_HIT,f.NO_POWERUP)}for(let t=0;t<2;t++)for(let e=0;e<6;e++){const s=220+e*d+d/2,o=80+(t+5)*L+L/2;n.createBlock(s,o,_.HIDDEN,f.NO_POWERUP)}}function Y(n){for(let s=0;s<10;s++)for(let o=0;o<12;o++){const r=40+o*d+d/2,h=60+s*L+L/2,g=Math.random();let E;g<.6?E=_.SINGLE_HIT:g<.85?E=_.DOUBLE_HIT:E=_.HIDDEN,n.createBlock(r,h,E,f.NO_POWERUP)}}function z(n){const a=i.blocks,t=a.length;let e,s;switch(n){case 1:e=4,s=2;break;case 2:e=6,s=3;break;case 3:e=8,s=4;break;case 4:e=15,s=10;break;default:e=4,s=2}const o=[];for(let r=0;r<t;r++)o.push(r);$(o);for(let r=0;r<Math.min(e,o.length);r++)a[o[r]].powerUpKind=f.MULTI_BALL;for(let r=e;r<Math.min(e+s,o.length);r++)a[o[r]].powerUpKind=f.SCORE_MULTIPLY}function $(n){for(let a=n.length-1;a>0;a--){const t=Math.floor(Math.random()*(a+1));[n[a],n[t]]=[n[t],n[a]]}}class V extends I.Scene{constructor(){super({key:"GameScene"});c(this,"paddle");c(this,"cursors");c(this,"launchKey");c(this,"spaceKey");c(this,"escapeKey");c(this,"scoreText");c(this,"levelText");c(this,"multiplierText");c(this,"gaugeSprites",[])}create(){i.phase=m.PLAYING,this.createBorders(),this.paddle=this.add.sprite(p/2,y,l.PADDLE),this.paddle.setOrigin(.5,.5),i.paddleX=p/2,this.cursors=this.input.keyboard.createCursorKeys(),this.launchKey=this.input.keyboard.addKey(I.Input.Keyboard.KeyCodes.Z),this.spaceKey=this.input.keyboard.addKey(I.Input.Keyboard.KeyCodes.SPACE),this.escapeKey=this.input.keyboard.addKey(I.Input.Keyboard.KeyCodes.ESC),this.input.on("pointermove",t=>{this.handleMouseMove(t)}),this.input.on("pointerdown",()=>{this.launchBall()}),this.createUI(),this.startLevel(i.currentLevel)}createBorders(){const t=this.add.graphics(),e=4474111,s=4;t.lineStyle(s,e,1),t.lineBetween(s/2,0,s/2,T),t.lineBetween(p-s/2,0,p-s/2,T),t.lineBetween(0,s/2,p,s/2)}createUI(){this.scoreText=this.add.text(10,10,"Score: 0",{fontSize:"18px",color:"#ffffff",fontFamily:"monospace"}),this.levelText=this.add.text(p-10,10,"Level: 1",{fontSize:"18px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(1,0),this.multiplierText=this.add.text(p/2,10,"",{fontSize:"18px",color:"#ffff00",fontFamily:"monospace"}).setOrigin(.5,0)}startLevel(t){this.clearLevel(),i.resetForNewLevel(),i.currentLevel=t,K(this,t),this.createBall(i.paddleX,y-u-O/2,!0),this.levelText.setText(`Level: ${t}`)}clearLevel(){var t,e,s,o;for(const r of i.balls)(t=r.sprite)==null||t.destroy();i.balls=[];for(const r of i.blocks)(e=r.sprite)==null||e.destroy(),(s=r.powerUpSprite)==null||s.destroy();i.blocks=[];for(const r of i.powerUpDrops)(o=r.sprite)==null||o.destroy();i.powerUpDrops=[];for(const r of this.gaugeSprites)r.destroy();this.gaugeSprites=[]}createBall(t,e,s=!1){const o=this.add.sprite(t,e,l.BALL);o.setOrigin(.5,.5);const r={x:t,y:e,up:!0,right:Math.random()>.5,sprite:o};return i.balls.push(r),i.ballIsHeld=s,r}createBlock(t,e,s,o){let r,h;switch(s){case _.SINGLE_HIT:r=l.BLOCK_SINGLE,h=1;break;case _.DOUBLE_HIT:r=l.BLOCK_DOUBLE_1,h=2;break;case _.HIDDEN:r=l.BLOCK_HIDDEN,h=2;break}const g=this.add.sprite(t,e,r);g.setOrigin(.5,.5);let E,S="";o!==f.NO_POWERUP&&(o===f.MULTI_BALL?S=l.BLOCK_MULTIBALL:S=l.BLOCK_MULTIPLIER,s!==_.HIDDEN&&(E=this.add.sprite(t,e,S),E.setOrigin(.5,.5)));const P={x:t,y:e,kind:s,powerUpKind:o,hitPoints:h,blockBitmap:r,powerUpBitmap:S,sprite:g,powerUpSprite:E,active:!0};return i.blocks.push(P),i.remainingBlocks++,i.blocksInLevel++,P}update(t,e){const s=e/1e3;for(i.updateMultiplierTimer(s),i.updateExtraBallTimer(s);i.pendingExtraBalls>0;){i.pendingExtraBalls--,this.createBall(i.paddleX,y-u-O/2,!1);const o=i.balls[i.balls.length-1];o.up=!0,o.right=Math.random()>.5}this.handleInput(s),this.updateBalls(s),this.updatePowerUpDrops(s),this.updateUI(),i.remainingBlocks<=0&&this.onLevelComplete()}handleMouseMove(t){const e=U/2;i.paddleX=I.Math.Clamp(t.x,B+e,p-B-e)}launchBall(){i.ballIsHeld&&(i.ballIsHeld=!1,this.sound.play(l.SFX_BOUNCE,{volume:.25}))}handleInput(t){if(I.Input.Keyboard.JustDown(this.escapeKey)){this.onGameOver(!1);return}this.cursors.left.isDown&&(i.paddleX-=N*t),this.cursors.right.isDown&&(i.paddleX+=N*t);const e=U/2;if(i.paddleX=I.Math.Clamp(i.paddleX,B+e,p-B-e),this.paddle.x=i.paddleX,(I.Input.Keyboard.JustDown(this.launchKey)||I.Input.Keyboard.JustDown(this.spaceKey))&&i.ballIsHeld&&this.launchBall(),i.ballIsHeld&&i.balls.length>0){const s=i.balls[0];s.x=i.paddleX,s.y=y-u-O/2,s.sprite.x=s.x,s.sprite.y=s.y}}updateBalls(t){var s;const e=[];for(let o=0;o<i.balls.length;o++){const r=i.balls[o];if(i.ballIsHeld&&o===0)continue;const h=R*t;if(r.x+=r.right?h:-h,r.y+=r.up?-h:h,r.x<=u&&(r.x=u,r.right=!0,this.sound.play(l.SFX_BOUNCE,{volume:.25})),r.x>=p-u&&(r.x=p-u,r.right=!1,this.sound.play(l.SFX_BOUNCE,{volume:.25})),r.y<=u&&(r.y=u,r.up=!1,this.sound.play(l.SFX_BOUNCE,{volume:.25})),r.y>=T+u){e.push(o);continue}this.checkPaddleCollision(r)&&(r.up=!0,r.y=y-O/2-u,this.sound.play(l.SFX_BOUNCE,{volume:.25})),this.checkBlockCollisions(r),r.sprite.x=r.x,r.sprite.y=r.y}for(let o=e.length-1;o>=0;o--){const r=e[o];(s=i.balls[r].sprite)==null||s.destroy(),i.balls.splice(r,1)}i.balls.length===0&&!i.ballIsHeld&&this.onGameOver(!1)}checkPaddleCollision(t){const e=i.paddleX-U/2,s=i.paddleX+U/2,o=y-O/2,r=y+O/2;return t.x+u>e&&t.x-u<s&&t.y+u>o&&t.y-u<r&&!t.up}checkBlockCollisions(t){for(const e of i.blocks){if(!e.active)continue;const s=e.x-d/2,o=e.x+d/2,r=e.y-L/2,h=e.y+L/2;if(t.x+u>s&&t.x-u<o&&t.y+u>r&&t.y-u<h){const g=t.x+u-s,E=o-(t.x-u),S=t.y+u-r,P=h-(t.y-u),A=Math.min(g,E),C=Math.min(S,P);A<C?t.right=g>E:t.up=S>P,this.hitBlock(e);break}}}hitBlock(t){var e,s,o,r;if(t.hitPoints--,i.incrementScore(),t.hitPoints<=0)t.active=!1,(e=t.sprite)==null||e.destroy(),(s=t.powerUpSprite)==null||s.destroy(),i.remainingBlocks--,this.sound.play(l.SFX_BREAK),t.powerUpKind!==f.NO_POWERUP&&this.spawnPowerUpDrop(t.x,t.y,t.powerUpKind);else{if(t.kind===_.DOUBLE_HIT)(o=t.sprite)==null||o.setTexture(l.BLOCK_DOUBLE_2);else if(t.kind===_.HIDDEN&&((r=t.sprite)==null||r.setTexture(l.BLOCK_HIDDEN_REVEALED),t.powerUpKind!==f.NO_POWERUP&&!t.powerUpSprite)){const h=t.powerUpKind===f.MULTI_BALL?l.BLOCK_MULTIBALL:l.BLOCK_MULTIPLIER;t.powerUpSprite=this.add.sprite(t.x,t.y,h),t.powerUpSprite.setOrigin(.5,.5)}this.sound.play(l.SFX_BOUNCE,{volume:.25})}}spawnPowerUpDrop(t,e,s){let o;if(s===f.MULTI_BALL)o=l.DROP_MULTIBALL;else{const g=Math.min(i.scoreMultiplier+1,5);g<=2?o=l.DROP_MULTIPLIER:g===3?o=l.DROP_MULTIPLIER_3:g===4?o=l.DROP_MULTIPLIER_4:o=l.DROP_MULTIPLIER_5}const r=this.add.sprite(t,e,o);r.setOrigin(.5,.5);const h={x:t,y:e,kind:s,sprite:r};i.powerUpDrops.push(h)}updatePowerUpDrops(t){var s;const e=[];for(let o=0;o<i.powerUpDrops.length;o++){const r=i.powerUpDrops[o];if(r.y+=G*t,r.sprite.y=r.y,r.y>T+20){e.push(o);continue}this.checkPowerUpCatch(r)&&(this.activatePowerUp(r.kind),e.push(o))}for(let o=e.length-1;o>=0;o--){const r=e[o];(s=i.powerUpDrops[r].sprite)==null||s.destroy(),i.powerUpDrops.splice(r,1)}}checkPowerUpCatch(t){const e=i.paddleX-U/2,s=i.paddleX+U/2,o=y-O/2;return t.x>e&&t.x<s&&t.y>o-10&&t.y<y+10}activatePowerUp(t){this.sound.play(l.SFX_POWERUP,{volume:.5}),t===f.MULTI_BALL?i.scheduleExtraBall():t===f.SCORE_MULTIPLY&&i.increaseMultiplier()}updateUI(){this.scoreText.setText(`Score: ${i.score}`),i.scoreMultiplier>1?(this.multiplierText.setText(`x${i.scoreMultiplier}`),this.multiplierText.setVisible(!0)):this.multiplierText.setVisible(!1)}onLevelComplete(){i.currentLevel>=4?this.onGameOver(!0):(i.currentLevel++,this.startLevel(i.currentLevel))}onGameOver(t){i.gameWon=t,t&&this.sound.play(l.SFX_WIN),this.clearLevel(),this.scene.start("GameOverScene")}}class Z extends I.Scene{constructor(){super({key:"GameOverScene"});c(this,"displayTimer",D);c(this,"initialsText");c(this,"cursorBlink",!0);c(this,"blinkTimer",0)}create(){var t;i.score>0&&i.isHighScore()?(i.phase=m.ENTERING_INITIALS,this.showInitialsEntry()):(i.phase=m.SHOWING_HIGH_SCORES,this.showHighScores()),(t=this.input.keyboard)==null||t.on("keydown-X",this.exitToTitle,this)}showInitialsEntry(){var e,s,o,r,h,g,E;const t=i.gameWon?"YOU WIN!":"GAME OVER";this.add.text(p/2,80,t,{fontSize:"48px",color:i.gameWon?"#00ff00":"#ff0000",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(p/2,150,`Final Score: ${i.score}`,{fontSize:"24px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(p/2,200,"NEW HIGH SCORE!",{fontSize:"28px",color:"#ffff00",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(p/2,260,"Enter Your Initials:",{fontSize:"20px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5),this.initialsText=this.add.text(p/2,320,"_ _ _",{fontSize:"48px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(p/2,400,"Type letters A-Z or use UP/DOWN to change",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(p/2,425,"LEFT/RIGHT: Move cursor | BACKSPACE: Delete",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(p/2,450,"ENTER: Submit",{fontSize:"14px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),(e=this.input.keyboard)==null||e.on("keydown-UP",this.cycleUp,this),(s=this.input.keyboard)==null||s.on("keydown-DOWN",this.cycleDown,this),(o=this.input.keyboard)==null||o.on("keydown-LEFT",this.moveLeft,this),(r=this.input.keyboard)==null||r.on("keydown-RIGHT",this.moveRight,this),(h=this.input.keyboard)==null||h.on("keydown-ENTER",this.submitInitials,this),(g=this.input.keyboard)==null||g.on("keydown-BACKSPACE",this.handleBackspace,this),(E=this.input.keyboard)==null||E.on("keydown",this.handleKeyInput,this),this.updateInitialsDisplay()}showHighScores(){var e,s;if(this.displayTimer=D,this.add.text(p/2,60,"HIGH SCORES",{fontSize:"36px",color:"#ffff00",fontFamily:"monospace"}).setOrigin(.5,.5),i.score>0){const o=i.gameWon?"YOU WIN!":"GAME OVER";this.add.text(p/2,100,o,{fontSize:"24px",color:i.gameWon?"#00ff00":"#ff0000",fontFamily:"monospace"}).setOrigin(.5,.5),this.add.text(p/2,130,`Your Score: ${i.score}`,{fontSize:"18px",color:"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5)}const t=i.score>0?180:120;for(let o=0;o<i.highScores.length;o++){const r=i.highScores[o],h=`${o+1}.`.padStart(3," "),g=r.initials.padEnd(3,"-"),E=r.score.toString().padStart(6," ");this.add.text(p/2,t+o*35,`${h} ${g} ${E}`,{fontSize:"22px",color:o<3?"#ffff00":"#ffffff",fontFamily:"monospace"}).setOrigin(.5,.5)}this.add.text(p/2,T-50,"Press X, SPACE, or ENTER to Continue",{fontSize:"18px",color:"#888888",fontFamily:"monospace"}).setOrigin(.5,.5),(e=this.input.keyboard)==null||e.on("keydown-SPACE",this.exitToTitle,this),(s=this.input.keyboard)==null||s.on("keydown-ENTER",this.exitToTitle,this)}handleKeyInput(t){if(i.phase!==m.ENTERING_INITIALS)return;const e=t.key.toUpperCase();e.length===1&&e>="A"&&e<="Z"&&(i.setInitialChar(e),this.updateInitialsDisplay())}handleBackspace(){if(i.phase!==m.ENTERING_INITIALS)return;const t=i.initialsEntry.currentPosition;i.initialsEntry.currentInitials[t]="-",t>0&&(i.initialsEntry.currentPosition=t-1),this.updateInitialsDisplay()}cycleUp(){i.phase===m.ENTERING_INITIALS&&(i.cycleInitialUp(),this.updateInitialsDisplay())}cycleDown(){i.phase===m.ENTERING_INITIALS&&(i.cycleInitialDown(),this.updateInitialsDisplay())}moveLeft(){i.phase===m.ENTERING_INITIALS&&(i.movePositionLeft(),this.updateInitialsDisplay())}moveRight(){i.phase===m.ENTERING_INITIALS&&(i.movePositionRight(),this.updateInitialsDisplay())}updateInitialsDisplay(){const t=i.initialsEntry.currentInitials,e=i.initialsEntry.currentPosition;let s="";for(let o=0;o<3;o++)o===e&&this.cursorBlink?s+=`[${t[o]}]`:s+=` ${t[o]} `;this.initialsText.setText(s)}submitInitials(){if(i.phase!==m.ENTERING_INITIALS)return;const t=i.getInitials();i.addHighScore(t),i.initialsEntered=!0,i.phase=m.SHOWING_HIGH_SCORES,this.scene.restart()}exitToTitle(){this.scene.start("TitleScene")}update(t,e){const s=e/1e3;i.phase===m.ENTERING_INITIALS&&(this.blinkTimer+=s,this.blinkTimer>=.3&&(this.blinkTimer=0,this.cursorBlink=!this.cursorBlink,this.updateInitialsDisplay())),i.phase===m.SHOWING_HIGH_SCORES&&(this.displayTimer-=s,this.displayTimer<=0&&this.exitToTitle())}}const J={type:I.AUTO,width:p,height:T,parent:"game-container",backgroundColor:"#000000",scale:{mode:I.Scale.FIT,autoCenter:I.Scale.CENTER_BOTH},scene:[M,v,V,Z],physics:{default:"arcade",arcade:{debug:!1}},audio:{disableWebAudio:!1},render:{pixelArt:!0,antialias:!1}};new I.Game(J);
